'use strict';

var color2k = require('color2k');

/**
 * Helper: Transforms hex rgba colors used in figma tokens:
 * rgba(#ffffff, 0.5) =? rgba(255, 255, 255, 0.5).
 * This is kind of like an alpha() function.
 */
function transformHEXRGBaForCSS(value) {
    if (value === undefined) {
        return value;
    }
    const match = /rgba\(\s*(?<hex>#.+?)\s*,\s*?(?<alpha>\d.*?)\)/g.exec(value);
    if (match && match.groups) {
        const { hex, alpha } = match.groups;
        try {
            const [r, g, b] = color2k.parseToRgba(hex);
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }
        catch (e) {
            console.warn(`Tried parsing "${hex}" as a hex value, but failed.`);
            return value;
        }
    }
    return value;
}

exports.transformHEXRGBaForCSS = transformHEXRGBaForCSS;
